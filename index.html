<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="with=device-width, inital-scale=1.0">
    <title>강원지방병무청 병역명문가 자가진단 시스템</title>
    <style>
        .section {
            margin-bottom: 20px;
        }
        .row {
            margin: 5px 0;
        }
        label {
            display: inline-block;
            width: 120px;
        }
        input[type="text"], input[type="number"] {
            width: 150px;
            padding: 4px;
        }
        #result {
            font-weight: bold;
            font-size: 18px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
<h2>항목 입력</h2>

<!-- 1번 항목 -->
<div class="section">
    <div class="row">
        <label>1번 항목</label>
        <select class="judge">
            <option value="">선택</option>
            <option value="가능">가능</option>
            <option value="불가능">불가능</option>
        </select>
    </div>
</div>

<!-- 2번 항목 -->
<div class="section">
    <div class="row">
        <label>2번 항목 개수</label>
        <input type="number" min="1" oninput="createSecondItems(this.value)">
    </div>
    <div id="secondItems"></div>
</div>

<!-- 3번 항목 -->
<div class="section">
    <div class="row">
        <label>3번 항목</label>
    </div>
    <div id="thirdItems"></div>
</div>

<button onclick="checkResult()">전체 결과 판단</button>

<div id="result"></div>

<script>
function createSecondItems(count) {
    const second = document.getElementById("secondItems");
    const third = document.getElementById("thirdItems");

    second.innerHTML = "";
    third.innerHTML = "";

    for (let i = 1; i <= count; i++) {
        const row = document.createElement("div");
        row.className = "row";

        const label = document.createElement("label");
        label.textContent = `2-${i} 항목`;

        const numInput = document.createElement("input");
        numInput.type = "number";
        numInput.min = "1";
        numInput.oninput = updateThirdItems;

        const select = document.createElement("select");
        select.className = "judge";
        select.innerHTML = `
            <option value="">선택</option>
            <option value="가능">가능</option>
            <option value="불가능">불가능</option>
        `;

        row.appendChild(label);
        row.appendChild(numInput);
        row.appendChild(select);
        second.appendChild(row);
    }
}

function updateThirdItems() {
    const third = document.getElementById("thirdItems");
    third.innerHTML = "";

    const numberInputs = document.querySelectorAll("#secondItems input[type='number']");

    numberInputs.forEach((input, idx) => {
        const count = Number(input.value);
        if (!count) return;

        for (let i = 1; i <= count; i++) {
            const row = document.createElement("div");
            row.className = "row";

            const label = document.createElement("label");
            label.textContent = `3-${idx + 1}-${i} 항목`;

            const select = document.createElement("select");
            select.className = "judge";
            select.innerHTML = `
                <option value="">선택</option>
                <option value="가능">가능</option>
                <option value="불가능">불가능</option>
            `;

            row.appendChild(label);
            row.appendChild(select);
            third.appendChild(row);
        }
    });
}

function checkResult() {
    const selects = document.querySelectorAll(".judge");
    const result = document.getElementById("result");

    let allPossible = true;
    let allImpossible = true;

    selects.forEach(sel => {
        const v = sel.value;
        if (v !== "가능") allPossible = false;
        if (v !== "불가능") allImpossible = false;
    });

    if (selects.length === 0) {
        result.textContent = "입력 항목이 없습니다.";
    } else if (allPossible) {
        result.textContent = "결과 : O";
    } else if (allImpossible) {
        result.textContent = "결과 : X";
    } else {
        result.textContent = "결과 : 판단 불가";
    }
}
</script>

</body>
</html>
